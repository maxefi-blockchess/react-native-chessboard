{"version":3,"names":["React","useCallback","useImperativeHandle","useMemo","useState","Gesture","GestureDetector","Animated","runOnJS","useAnimatedStyle","useDerivedValue","useSharedValue","withTiming","useChessboardProps","useBoardOperations","useBoardPromotion","usePieceRefs","useChessEngine","useReversePiecePosition","ChessPiece","Piece","memo","forwardRef","id","startPosition","square","size","ref","chess","refs","pieceEnabled","isPromoting","onSelectPiece","onMove","selectedSquare","turn","isPieceGestureInProgress","setIsPieceGestureInProgress","isPieceActive","setIsPieceActive","pieceSize","durations","move","moveDuration","gestureEnabled","gestureEnabledFromChessboardProps","playersColor","value","charAt","toPosition","toTranslation","isGestureActive","offsetX","offsetY","borderColor","translateX","x","translateY","y","validateMove","from","to","moves","verbose","find","m","wrappedOnMoveForJSThread","moveTo","Promise","resolve","duration","isFinished","undefined","movePiece","enable","active","onStartTap","globalMoveTo","current","handleOnBegin","currentSquare","previousTappedSquare","gestureProgress","Pan","enabled","onBegin","onStart","onUpdate","translationX","translationY","onEnd","onFinalize","gestureDisabled","gesture","style","justifyContent","alignItems","position","zIndex","toFixed","borderWidth","backgroundColor","boxSize","width","height","transform","underlay","translation","borderRadius","createElement","Fragment","View","prev","next"],"sourceRoot":"../../../../src","sources":["components/piece/index.tsx"],"mappings":"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"}
