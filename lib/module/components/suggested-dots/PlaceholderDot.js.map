{"version":3,"names":["React","useMemo","StyleSheet","View","Animated","runOnJS","useAnimatedStyle","useDerivedValue","withTiming","useChessboardProps","useReversePiecePosition","PlaceholderDot","memo","x","y","selectableSquares","moveTo","pieceSize","colors","toPosition","toTranslation","currentSquare","suggested","translation","isSelectable","value","map","square","includes","filter","v","length","rPlaceholderStyle","canBeSelected","opacity","styles","placeholderContainer","width","transform","translateX","translateY","placeholder","borderColor","create","position","aspectRatio","backgroundColor","flex","borderWidth"],"sources":["PlaceholderDot.tsx"],"sourcesContent":["import type { Square } from 'chess.js';\r\nimport React, { useMemo } from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport Animated, {\r\n  runOnJS,\r\n  useAnimatedStyle,\r\n  useDerivedValue,\r\n  withTiming,\r\n} from 'react-native-reanimated';\r\nimport { useChessboardProps } from '../../context/props-context/hooks';\r\n\r\nimport { useReversePiecePosition } from '../../notation';\r\n\r\ntype PlaceholderDotProps = {\r\n  x: number;\r\n  y: number;\r\n  selectableSquares: Animated.SharedValue<Square[]>;\r\n  moveTo?: (to: Square) => void;\r\n};\r\n\r\nconst PlaceholderDot: React.FC<PlaceholderDotProps> = React.memo(\r\n  ({ x, y, selectableSquares, moveTo }) => {\r\n    const { pieceSize, colors } = useChessboardProps();\r\n    const { toPosition, toTranslation } = useReversePiecePosition();\r\n    const currentSquare = toPosition({ x: x * pieceSize, y: y * pieceSize });\r\n    const { suggested } = colors;\r\n    const translation = useMemo(\r\n      () => toTranslation(currentSquare),\r\n      [currentSquare, toTranslation]\r\n    );\r\n\r\n    const isSelectable = useDerivedValue(() => {\r\n      'worklet';\r\n      return (\r\n        selectableSquares.value\r\n          .map((square) => square.includes(currentSquare))\r\n          .filter((v) => v).length > 0\r\n      );\r\n    }, [currentSquare, selectableSquares.value]);\r\n\r\n    const rPlaceholderStyle = useAnimatedStyle(() => {\r\n      const canBeSelected = isSelectable.value;\r\n\r\n      return { opacity: withTiming(canBeSelected ? 1 : 0) };\r\n    }, []);\r\n\r\n    return (\r\n      <View\r\n        onTouchEnd={() => {\r\n          if (isSelectable.value && moveTo) {\r\n            runOnJS(moveTo)(currentSquare);\r\n          }\r\n        }}\r\n        style={[\r\n          styles.placeholderContainer,\r\n          {\r\n            width: pieceSize,\r\n            transform: [\r\n              { translateX: translation.x },\r\n              { translateY: translation.y },\r\n            ],\r\n          },\r\n        ]}\r\n      >\r\n        <Animated.View\r\n          style={[\r\n            styles.placeholder,\r\n            { borderColor: suggested },\r\n            rPlaceholderStyle,\r\n          ]}\r\n        />\r\n      </View>\r\n    );\r\n  }\r\n);\r\n\r\nconst styles = StyleSheet.create({\r\n  placeholderContainer: {\r\n    position: 'absolute',\r\n    aspectRatio: 1,\r\n    backgroundColor: 'transparent',\r\n  },\r\n  placeholder: {\r\n    flex: 1,\r\n    borderWidth: 0.5,\r\n    opacity: 1,\r\n  },\r\n});\r\n\r\nexport { PlaceholderDot };\r\n"],"mappings":"AACA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,cAAjC;AACA,OAAOC,QAAP,IACEC,OADF,EAEEC,gBAFF,EAGEC,eAHF,EAIEC,UAJF,QAKO,yBALP;AAMA,SAASC,kBAAT,QAAmC,mCAAnC;AAEA,SAASC,uBAAT,QAAwC,gBAAxC;AASA,MAAMC,cAA6C,gBAAGX,KAAK,CAACY,IAAN,CACpD,QAAyC;EAAA,IAAxC;IAAEC,CAAF;IAAKC,CAAL;IAAQC,iBAAR;IAA2BC;EAA3B,CAAwC;EACvC,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAwBT,kBAAkB,EAAhD;EACA,MAAM;IAAEU,UAAF;IAAcC;EAAd,IAAgCV,uBAAuB,EAA7D;EACA,MAAMW,aAAa,GAAGF,UAAU,CAAC;IAAEN,CAAC,EAAEA,CAAC,GAAGI,SAAT;IAAoBH,CAAC,EAAEA,CAAC,GAAGG;EAA3B,CAAD,CAAhC;EACA,MAAM;IAAEK;EAAF,IAAgBJ,MAAtB;EACA,MAAMK,WAAW,GAAGtB,OAAO,CACzB,MAAMmB,aAAa,CAACC,aAAD,CADM,EAEzB,CAACA,aAAD,EAAgBD,aAAhB,CAFyB,CAA3B;EAKA,MAAMI,YAAY,GAAGjB,eAAe,CAAC,MAAM;IACzC;;IACA,OACEQ,iBAAiB,CAACU,KAAlB,CACGC,GADH,CACQC,MAAD,IAAYA,MAAM,CAACC,QAAP,CAAgBP,aAAhB,CADnB,EAEGQ,MAFH,CAEWC,CAAD,IAAOA,CAFjB,EAEoBC,MAFpB,GAE6B,CAH/B;EAKD,CAPmC,EAOjC,CAACV,aAAD,EAAgBN,iBAAiB,CAACU,KAAlC,CAPiC,CAApC;EASA,MAAMO,iBAAiB,GAAG1B,gBAAgB,CAAC,MAAM;IAC/C,MAAM2B,aAAa,GAAGT,YAAY,CAACC,KAAnC;IAEA,OAAO;MAAES,OAAO,EAAE1B,UAAU,CAACyB,aAAa,GAAG,CAAH,GAAO,CAArB;IAArB,CAAP;EACD,CAJyC,EAIvC,EAJuC,CAA1C;EAMA,oBACE,oBAAC,IAAD;IACE,UAAU,EAAE,MAAM;MAChB,IAAIT,YAAY,CAACC,KAAb,IAAsBT,MAA1B,EAAkC;QAChCX,OAAO,CAACW,MAAD,CAAP,CAAgBK,aAAhB;MACD;IACF,CALH;IAME,KAAK,EAAE,CACLc,MAAM,CAACC,oBADF,EAEL;MACEC,KAAK,EAAEpB,SADT;MAEEqB,SAAS,EAAE,CACT;QAAEC,UAAU,EAAEhB,WAAW,CAACV;MAA1B,CADS,EAET;QAAE2B,UAAU,EAAEjB,WAAW,CAACT;MAA1B,CAFS;IAFb,CAFK;EANT,gBAiBE,oBAAC,QAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACLqB,MAAM,CAACM,WADF,EAEL;MAAEC,WAAW,EAAEpB;IAAf,CAFK,EAGLU,iBAHK;EADT,EAjBF,CADF;AA2BD,CArDmD,CAAtD;AAwDA,MAAMG,MAAM,GAAGjC,UAAU,CAACyC,MAAX,CAAkB;EAC/BP,oBAAoB,EAAE;IACpBQ,QAAQ,EAAE,UADU;IAEpBC,WAAW,EAAE,CAFO;IAGpBC,eAAe,EAAE;EAHG,CADS;EAM/BL,WAAW,EAAE;IACXM,IAAI,EAAE,CADK;IAEXC,WAAW,EAAE,GAFF;IAGXd,OAAO,EAAE;EAHE;AANkB,CAAlB,CAAf;AAaA,SAASvB,cAAT"}