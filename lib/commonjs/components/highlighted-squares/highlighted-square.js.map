{"version":3,"names":["HighlightedSquareComponent","React","forwardRef","ref","style","colors","lastMoveHighlight","useChessboardProps","backgroundColor","useSharedValue","isHighlighted","borderColor","useImperativeHandle","reset","value","highlight","bg","border","rHighlightedSquareStyle","useAnimatedStyle","opacity","withTiming","borderWidth","styles","highlightedSquare","StyleSheet","create","position","aspectRatio","HighlightedSquare","memo"],"sources":["highlighted-square.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\r\nimport { StyleProp, StyleSheet, ViewStyle } from 'react-native';\r\nimport Animated, {\r\n  useAnimatedStyle,\r\n  useSharedValue,\r\n  withTiming,\r\n} from 'react-native-reanimated';\r\nimport { useChessboardProps } from '../../context/props-context/hooks';\r\n\r\ntype HighlightedSquareProps = {\r\n  style?: StyleProp<ViewStyle>;\r\n};\r\n\r\nexport type HighlightedSquareRefType = {\r\n  isHighlighted: () => boolean;\r\n  reset: () => void;\r\n  highlight: (_?: { backgroundColor?: string; borderColor?: string }) => void;\r\n};\r\n\r\nconst HighlightedSquareComponent = React.forwardRef<\r\n  HighlightedSquareRefType,\r\n  HighlightedSquareProps\r\n>(({ style }, ref) => {\r\n  const {\r\n    colors: { lastMoveHighlight },\r\n  } = useChessboardProps();\r\n  const backgroundColor = useSharedValue(lastMoveHighlight);\r\n  const isHighlighted = useSharedValue(false);\r\n  const borderColor = useSharedValue(lastMoveHighlight);\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      reset: () => {\r\n        isHighlighted.value = false;\r\n      },\r\n      highlight: ({ backgroundColor: bg, borderColor: border } = {}) => {\r\n        backgroundColor.value = bg ?? lastMoveHighlight;\r\n        isHighlighted.value = true;\r\n        borderColor.value = border ?? lastMoveHighlight;\r\n      },\r\n      isHighlighted: () => isHighlighted.value,\r\n    }),\r\n    [backgroundColor, isHighlighted, lastMoveHighlight, borderColor]\r\n  );\r\n\r\n  const rHighlightedSquareStyle = useAnimatedStyle(() => {\r\n    return {\r\n      opacity: withTiming(isHighlighted.value ? 1 : 0),\r\n      backgroundColor: backgroundColor.value,\r\n      borderWidth: 0.5,\r\n      borderColor: borderColor.value,\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Animated.View\r\n      style={[styles.highlightedSquare, style, rHighlightedSquareStyle]}\r\n    />\r\n  );\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n  highlightedSquare: {\r\n    position: 'absolute',\r\n    aspectRatio: 1,\r\n  },\r\n});\r\n\r\nconst HighlightedSquare = React.memo(HighlightedSquareComponent);\r\n\r\nexport { HighlightedSquare };\r\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAKA;;;;;;AAYA,MAAMA,0BAA0B,gBAAGC,cAAA,CAAMC,UAAN,CAGjC,OAAYC,GAAZ,KAAoB;EAAA,IAAnB;IAAEC;EAAF,CAAmB;EACpB,MAAM;IACJC,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEF,IAAAC,yBAAA,GAFJ;EAGA,MAAMC,eAAe,GAAG,IAAAC,qCAAA,EAAeH,iBAAf,CAAxB;EACA,MAAMI,aAAa,GAAG,IAAAD,qCAAA,EAAe,KAAf,CAAtB;EACA,MAAME,WAAW,GAAG,IAAAF,qCAAA,EAAeH,iBAAf,CAApB;EAEA,IAAAM,0BAAA,EACET,GADF,EAEE,OAAO;IACLU,KAAK,EAAE,MAAM;MACXH,aAAa,CAACI,KAAd,GAAsB,KAAtB;IACD,CAHI;IAILC,SAAS,EAAE,YAAuD;MAAA,IAAtD;QAAEP,eAAe,EAAEQ,EAAnB;QAAuBL,WAAW,EAAEM;MAApC,CAAsD,uEAAP,EAAO;MAChET,eAAe,CAACM,KAAhB,GAAwBE,EAAxB,aAAwBA,EAAxB,cAAwBA,EAAxB,GAA8BV,iBAA9B;MACAI,aAAa,CAACI,KAAd,GAAsB,IAAtB;MACAH,WAAW,CAACG,KAAZ,GAAoBG,MAApB,aAAoBA,MAApB,cAAoBA,MAApB,GAA8BX,iBAA9B;IACD,CARI;IASLI,aAAa,EAAE,MAAMA,aAAa,CAACI;EAT9B,CAAP,CAFF,EAaE,CAACN,eAAD,EAAkBE,aAAlB,EAAiCJ,iBAAjC,EAAoDK,WAApD,CAbF;EAgBA,MAAMO,uBAAuB,GAAG,IAAAC,uCAAA,EAAiB,MAAM;IACrD,OAAO;MACLC,OAAO,EAAE,IAAAC,iCAAA,EAAWX,aAAa,CAACI,KAAd,GAAsB,CAAtB,GAA0B,CAArC,CADJ;MAELN,eAAe,EAAEA,eAAe,CAACM,KAF5B;MAGLQ,WAAW,EAAE,GAHR;MAILX,WAAW,EAAEA,WAAW,CAACG;IAJpB,CAAP;EAMD,CAP+B,EAO7B,EAP6B,CAAhC;EASA,oBACE,6BAAC,8BAAD,CAAU,IAAV;IACE,KAAK,EAAE,CAACS,MAAM,CAACC,iBAAR,EAA2BpB,KAA3B,EAAkCc,uBAAlC;EADT,EADF;AAKD,CAzCkC,CAAnC;;AA2CA,MAAMK,MAAM,GAAGE,uBAAA,CAAWC,MAAX,CAAkB;EAC/BF,iBAAiB,EAAE;IACjBG,QAAQ,EAAE,UADO;IAEjBC,WAAW,EAAE;EAFI;AADY,CAAlB,CAAf;;AAOA,MAAMC,iBAAiB,gBAAG5B,cAAA,CAAM6B,IAAN,CAAW9B,0BAAX,CAA1B"}